<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Payments</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <!-- custom css file link  -->
    <link rel="stylesheet" href="Payment.css" />
  </head>
  <body>
    <div class="container">
      <form action="javascript:alert('Payment Successful')">
        <div class="row">
          <div class="col">
            <h3 class="title">billing address</h3>

            <div class="inputBox">
              <span>full name :</span>
              <input type="text" id="name" placeholder="john deo" />
            </div>
            <div class="inputBox">
              <span>email :</span>
              <input
                type="email"
                id="email"
                placeholder="example@example.com"
              />
            </div>
            <div class="inputBox">
              <span>address :</span>
              <input
                type="text"
                id="address"
                placeholder="room - street - locality"
              />
            </div>
            <div class="inputBox">
              <span>city :</span>
              <input type="text" id="city" placeholder="mumbai" />
            </div>

            <div class="flex">
              <div class="inputBox">
                <span>state :</span>
                <input type="text" id="state" placeholder="india" />
              </div>
              <div class="inputBox">
                <span>zip code :</span>
                <input type="text" id="zip" placeholder="123 456" />
              </div>
            </div>
          </div>

          <div class="col">
            <h3 class="title">payment</h3>

            <div class="inputBox">
              <span>cards accepted :</span>
              <img src="images/card_img.png" alt="" />
            </div>
            <div class="inputBox">
              <span>name on card :</span>
              <input type="text" id="card" placeholder="mr. john deo" />
            </div>
            <div class="inputBox">
              <span>credit card number :</span>
              <input
                type="number"
                id="credit"
                placeholder="1111-2222-3333-4444"
              />
            </div>
            <div class="inputBox">
              <span>exp month :</span>
              <input type="text" id="exp_mon" placeholder="january" />
            </div>

            <div class="flex">
              <div class="inputBox">
                <span>exp year :</span>
                <input type="number" id="exp_year" placeholder="2022" />
              </div>
              <div class="inputBox">
                <span>CVV :</span>
                <input type="text" id="cvv" placeholder="1234" />
              </div>
            </div>
          </div>
        </div>

        <input
          type="submit"
          value="proceed to checkout"
          id="bt"
          onclick="saveFile()"
          class="submit-btn"
          onclick="document.forms[0].submit()"
        />
      </form>
    </div>

    <script>
      let saveFile = () => {
        // Get the data from each element on the form.
        const name = document.getElementById("name");
        const email = document.getElementById("email");
        const address = document.getElementById("address");
        const city = document.getElementById("city");
        const state = document.getElementById("state");
        const zip = document.getElementById("zip");
        const card = document.getElementById("card");
        const credit = document.getElementById("credit");
        const exp_mon = document.getElementById("exp_mon");
        const exp_year = document.getElementById("exp_year");
        const cvv = document.getElementById("cvv");

        // This variable stores all the data.
        let data =
          "\r Name: " +
          name.value +
          " \r\n " +
          "email: " +
          email.value +
          " \r\n " +
          "address: " +
          address.value +
          " \r\n " +
          "city: " +
          city.value +
          " \r\n " +
          "state: " +
          state.value +
          " \r\n " +
          "zip: " +
          zip.value +
          " \r\n " +
          "card: " +
          card.value +
          " \r\n " +
          "credit: " +
          credit.value +
          " \r\n " +
          "exp_mon: " +
          exp_mon.value +
          " \r\n " +
          "exp_year: " +
          exp_year.value +
          " \r\n " +
          "cvv: " +
          cvv.value;
        console.log(data); //printing form data into the console
        // Convert the text to BLOB.
        const textToBLOB = new Blob([data], { type: "text/plain" });
        var filename = new Date();
        var month = new Date(); //months from 1-12
        month = month.getMonth();

        var day = new Date();
        var day = day.getUTCDate();

        var year = new Date();
        var year = year.getUTCFullYear();

        newdate = year + "/" + month + "/" + day;
        const sFileName = filename; // The file to save the data.

        let newLink = document.createElement("a");
        newLink.download = new Date();

        if (window.webkitURL != null) {
          newLink.href = window.webkitURL.createObjectURL(textToBLOB);
        } else {
          newLink.href = window.URL.createObjectURL(textToBLOB);
          newLink.style.display = "none";
          document.body.appendChild(newLink);
        }

        newLink.click();
      };
    </script>
  </body>
</html>
